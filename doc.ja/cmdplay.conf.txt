* コンフィギュレーションファイル

<cmdplayコンフィギュレーションファイル> = <再生パターン>+
<再生パターン> = [play] [pattern] <再生パターン名> [{]
                 [playfile:] [playargs] <パターンマッチ演算子> <正規表現>
                 [playmatch:] <playmatch用要素>+
                 [execcwd:] <再生要素>
                 [execcmd:] <再生要素>
                 [execargs:] <再生要素>+
                 ( [execenvs:] <環境変数要素>+ )?
		 [}]
<playmatch用要素> = ( [playfile] [==] [recfile] |
                      [optfile] [==] [recfile] |
                      [playcmd] <パターンマッチ演算子> <正規表現> )
<再生要素> = ( <記録時パラメータ> |
               <記録時パラメータ> <パターンマッチ演算子> <正規表現> |
               <再生要求時パラメータ> |
               <再生要求時パラメータ> <パターンマッチ演算子> <正規表現> |
               <任意文字列> )
<環境変数要素> = <任意文字列>
<正規表現> = スラッシュ記号で囲ったルビー的正規表現
<任意文字列> = シングルクオーテーションマークで囲ったルビー的文字列
<再生パターン名> = シングルクオーテーションマークで囲ったルビー的文字列

注意

スペースは何個あってもよく、改行やタブを含んでもよい。
# より後はコメント
再生パターンは複数指定できる。
<playmatch用要素> では [playfile] [==] [recfile] もしくは [optfile] [==] [recfile] のど
ちらかが必須。他は任意。
<環境変数要素> は '変数名=値' の形をした文字列。
<記録時パラメータ> の詳細は cmdrec.txt 参照のこと。
execcwd: での <記録時パラメータ> は reccwd しか使えない。
execcwd: での <再生要求時パラメータ> は playcwd しか使えない。
execcmd: での <記録時パラメータ> は reccmd しか使えない。
execcmd: での <再生要求時パラメータ> は playcmd しか使えない。


例

-------- cmdplay.conf --------
play pattern 'clang c' {
	playfile:
		playargs =~ /^.+\.c$/
	playmatch:
		playfile == recfile
		playcmd =~ /\/clang$/
	execcwd:
		reccwd
	execcmd:
		'clang'
	execargs:
		'-fsyntax-only'
		playargs !~ /^-code-completion-at.+$/
		recargs =~ /^-W.+$/
		recargs =~ /^-f.+$/
		recargs =~ /^-std=.+$/
		recargs =~ /^-I\n?.+$/
		recargs =~ /^-U\n?.+$/
		recargs =~ /^-D\n?.+$/
		playargs =~ /^-code-completion-at.+$/
		playfile
}
play pattern gcc/c {
	playfile:
...
}
-----------------------------

* 再生要求時パラメータ

playcwd ..... 再生要求時のカレントディレクトリ
　　　　　トゥルーパスに変換。
playcmd ..... 再生要求時のコマンド名(第ゼロ引数)
　　　　　PATHを検索してフル＆トゥルーパスに変換。
playfile .... 再生パターンの playfile: にマッチした引数
　　　　　一つのみでなければエラー。
　　　　　相対パスになっている場合は、playcwd を付加してフル＆トゥルーパスに変換。
　　　　　ファイルは実際に存在しなければならない。
optfile ..... 再生要求時の --file= オプションで指定したファイル名
　　　　　一つのみでなければエラー。
　　　　　相対パスになっている場合は、playcwd を付加してフル＆トゥルーパスに変換。
　　　　　ファイルは実際に存在しなければならない。
playargs .... 再生要求時の引数配列
　　　　　再生パターンの playfile: で使用した場合は、再生要求時のコマンド名(第ゼロ引数)
　　　　　は削除される。
　　　　　その他で使用した場合は、再生要求時のコマンド名(第ゼロ引数)と、再生パターンの
　　　　　playfile: にマッチした引数は削除される。
　　　　　要素区切りを "\n" に置き換え。最後にも "\n" が有る。

* 再生実行時パラメータ

execcmd ..... 再生実行時のコマンド名
execfile .... 再生実行時のファイル名
execcwd ..... 再生実行時のカレントディレクトリ
execargs .... 再生実行時の引数配列

* 再生アルゴリズム(cmdplay)

再生要求時パラメータを用意する。
コマンドデータベースのすべてのレコードと、すべての再生パターンの組み合わせでパターン
マッチングを行ない、
1) マッチしなかった
2) 複数のレコードとマッチした
3) 複数の再生パターンとマッチした
場合は、エラーとする。
エラーでなかった、即ち、唯一つのレコードがただ一つの再生パターンとマッチした場合、
再生パターンを使って再生実行時パラメータを計算する。
再生実行時パラメータを使って再生を execve する。
